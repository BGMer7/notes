# Object Storage Service 对象存储

底层存储大致可以分为四类：对象存储(Object Storage)，NoSQL数据库(NoSQL Sources)，关系型数据库(RDBMS Storage)，大数据(Hadoop)。

过去的相当长的一段时间里，商用对象存储占据了市场上的大量的份额。

国外的Amazon S3，国内的阿里云OSS都成为了大多数公司的选择。

但是构建一个企业级的数据湖（包括结构化和非结构化数据）已经成为了越来越多公司的目标。



## 对象存储概述

对象存储（Object Storage Service，OSS），也叫基于对象的存储，是一种解决和处理离散单元的方法，可提供基于分布式系统之上的对象形式的数据存储服务。对象存储和我们经常接触到的块和文件系统等存储形态不同，它提供RESTful API数据读写接口及丰富的SDK接口，并且常以网络服务的形式提供数据的访问。简单理解，对象存储类似酒店的代客泊车。顾客（前端应用）把车钥匙交给服务生，换来一张收据（对象的标识符）。顾客不用关心车（数据）具体停在哪个车位，这样省事儿、省时间。

|          | SAN                         | NAS                            | OSS                                    |
| -------- | --------------------------- | ------------------------------ | -------------------------------------- |
| 系统架构 | 光纤传输为主，FC、ISCSI协议 | IP链路、NFS、CIFS协议          | IP链路，RESTful API接口                |
| 一致性   | 强一致性                    | 扩展性好                       | 扩展性好                               |
| 数据管理 | LUN管理方式                 | 文件目录管理方式               | 基于策略的自动化管理                   |
| 映射关系 | 映射关系1:1                 | 映射关系1:N                    | 映射关系M:N                            |
| 存储形式 | 数据块                      | 文件                           | 对象                                   |
| 数据访问 | 粒度很细，适合小数据        | 树形结构，随着层数增大访问变慢 | 扁平结构，像SAN一样检索，像NAS一样扩展 |



阿里云对象存储OSS（Object Storage Service）是阿里云提供的海量、安全、低成本、高持久的云存储服务。其数据设计持久性不低于99.9999999999%（12个9），服务可用性（或业务连续性）不低于99.995%。

- 对象（Object）是OSS存储数据的基本单元，也被称为OSS的文件。对象由元信息（Object Meta）、用户数据（Data）和文件名（Key）组成。对象由存储空间内部唯一的Key来标识。对象元信息是一组键值对，表示了对象的一些属性，例如最后修改时间、大小等信息，同时您也可以在元信息中存储一些自定义的信息。
- 存储空间（Bucket）是您用于存储对象（Object）的容器，所有的对象都必须隶属于某个存储空间。存储空间具有各种配置属性，包括地域、访问权限、存储类型等。您可以根据实际需求，创建不同类型的存储空间来存储不同的数据。



## MinIO

### MinIO的官网介绍

#### 高性能

MinIO 是全球领先的对象存储先锋，目前在全世界有数百万的用户. 在标准硬件上，读/写速度上高达183 GB / 秒 和 171 GB / 秒。

对象存储可以充当主存储层，以处理Spark、Presto、TensorFlow、H2O.ai等各种复杂工作负载以及成为Hadoop HDFS的替代品。

MinIO用作云原生应用程序的主要存储，与传统对象存储相比，云原生应用程序需要更高的吞吐量和更低的延迟。而这些都是MinIO能够达成的性能指标。

 

#### 可扩展性

MinIO利用了Web缩放器的来之不易的知识，为对象存储带来了简单的缩放模型。 这是我们坚定的理念 “简单可扩展.” 在 MinIO, 扩展从单个群集开始，该群集可以与其他MinIO群集联合以创建全局名称空间, 并在需要时可以跨越多个不同的数据中心。 通过添加更多集群可以扩展名称空间, 更多机架，直到实现目标。

 

#### 云的原生支持

MinIO 是在过去4年的时间内从0开始打造的一款软件 ，符合一切原生云计算的架构和构建过程，并且包含最新的云计算的全新的技术和概念。 其中包括支持Kubernetes 、微服和多租户的的容器技术。使对象存储对于 Kubernetes更加友好。

 

#### 开放全部源代码 + 企业级支持

MinIO 基于Apache V2 license 100% 开放源代码 。 这就意味着 MinIO的客户能够自动的、无限制、自由免费使用和集成MinIO、自由的创新和创造、 自由的去修改、自由的再次发行新的版本和软件. 确实, MinIO 强有力的支持和驱动了很多世界500强的企业。 此外，其部署的多样性和专业性提供了其他软件无法比拟的优势。

 

#### 与Amazon S3 兼容

亚马逊云的 S3 API（接口协议） 是在全球范围内达到共识的对象存储的协议，是全世界内大家都认可的标准。 MinIO 在很早的时候就采用了 S3 兼容协议，并且MinIO 是第一个支持 S3 Select 的产品. MinIO对其兼容性的全面性感到自豪， 并且得到了 750多个组织的认同, 包括Microsoft Azure使用MinIO的S3网关 - 这一指标超过其他同类产品的总和。

 

#### 简单

极简主义是MinIO的指导性设计原则。简单性减少了出错的机会，提高了正常运行时间，提供了可靠性，同时简单性又是性能的基础。 只需下载一个二进制文件然后执行，即可在几分钟内安装和配置MinIO。 配置选项和变体的数量保持在最低限度，这样让失败的配置概率降低到接近于0的水平。 MinIO升级是通过一个简单命令完成的，这个命令可以无中断的完成MinIO的升级，并且不需要停机即可完成升级操作 - 降低总使用和运维成本。

 

#### 全世界增长最快的对象存储系统

MinIO生产部署涵盖了全球。 作为全球使用最多和下载量最大的对象存储服务系统, 它的影响力在与日俱增 - 由非凡的贡献者和传播者社区提供支持。

 

### MinIO的设计哲学

**极简的理念**：采用尽可以简单可靠的集群管理方案，摒弃复杂的大规模集群调度管理，减少风险因素与性能瓶颈，聚焦产品的核心功能，打造高可靠的集群、灵活的扩展能力以及超高的性能；

**积木式扩展**：建立众多的中小规模、易管理的集群，支持跨数据中心将多个集群聚合成超大资源池，而非直接采用大规模、统一管理的分布式集群。



 **基本特性**

|                  |                                                              |
| ---------------- | ------------------------------------------------------------ |
| 云原生           | 与K8s、Docker编排系统良好对接，实现灵活部署                  |
| 部署简单         | 只有一个执行文件，参数很少。部署简单，只需要一个命令，`./minio server data`，即可启动一个MinIO系统 |
| 精细化修复       | 修复操作可以精细化到单个对象                                 |
| S3 select支持    | 对于超大的对象，可以通过SQL语句以加速人工智能与大数据分析处理 |
| 多语言客户端支持 | 几乎支持了市面上大多数的主流开发语言客户端                   |
| 操作系统支持     | Linux、Unix、Windows、MacOS                                  |

 

高级特性

|                |                                                              |
| -------------- | ------------------------------------------------------------ |
| 纠删编码       | 针对CPU进行汇编级优化后的纠删码保护每一个对象                |
| 比特位保护     | 用户未知的情况下的静默错误/比特位衰减是磁盘的一个严重的问题。MinIO使用高度优化的HighwayHash算法保证不读取出错误的数据。 |
| 加密           | 支持多种成熟的服务端加密模式，对性能的损耗忽略不计。         |
| 单写多读(worm) | Write-Only-Read-Multi，该特性开启之后，MinIO将禁止所有的可能改变对象数据、元数据的API。 |
| 持续备份       | 支持快速增量备份到NAS、公有云等。                            |
| 多个云网关     | 可以作为多种公有云、NAS设置的网关、对外提供S3接口            |
| 用户身份管理   | 支持与OpenID connect 规范，支持临时密码，支持高度细化的、可支持的访问策略。 |



 [什么是对象存储？看这一篇就够了！_MinIO (sohu.com)](https://www.sohu.com/a/391960620_505795)

 

 

 

 

 

 

 

 

## FastDFS

FastDFS是一个开源的轻量级分布式文件系统，用于解决大数据量存储和负载均衡等问题，并需要通过专有API进行访问。满足大容量文件存储问题，并保证高性能和高扩展性。它能够很好的解决上述提到的业务场景。

### FastDFS的优点

- 文件不分块存储，文件和系统中的文件一一对应。
- 对文件内容做hash处理，避免出现重复文件，节约磁盘空间。
- 下载文件支持HTTP协议，可基于内置Web Server或外部Web Server。
- 支持在线扩容，动态添加卷。
- 支持文件冗余备份和负载均衡。
- 存储服务器上可以保存文件属性（meta-data）V2.0 网络通信采用libevent，支持大并发访问，整体性能更好。



### FastDFS的缺点

- 直接按文件存储，可直接查看文件内容，缺乏文件安全性。
- 数据同步无校验，存在静默IO问题，降低系统可用性。
- 单线程数据同步，仅适合存储小文件（4KB到500MB之间）。
- 备份数根据存储分卷（分组）决定，缺乏文件备份数设置灵活性。
- 单个挂载点异常会导致整个存储节点下线。
- 缺乏多机房容灾支持。
- 静态的负载均衡机制。

 

## 选择MinIO而非FastDFS的8个理由

### 理由1：安装部署(运维)复杂度

FastDFS的部署不过是零件的组装过程，需要你去理解FastDFS的架构设计，才能够正确的安装部署。MinIO在安装的过程是黑盒的，你不用去深入关注它的架构，也不需要你进行零件组装，基本上可以做到开箱即用。普通的技术人员就能够参与后期运维。

 

### 理由2：FastDFS没有官方文档

FastDFS开始也有十年了。竟然没有官方文档，所有的文档全是某某公司的自己总结的文档，或者是某某网友自己总结的文档。

从这点上看FastDFS真的是一败涂地，当然阿里余庆大神在做这个项目的时候可能也没有考虑到后来会有这么多人用。即使用的人多了，在余庆大神眼里可能觉得这只是自己开发的一个小玩具，没有继续深入运营的必要。

 

### 理由3：开源项目的运营机构

FastDFS是阿里余庆做的一个个人项目，在一些互联网创业公司中有应用，没有官网，不活跃，目前已经很少做更新。

MinIO目前是由2014年在硅谷创立的公司MinIO.Inc运营的开源项目，社区论坛的活跃度目前也非常的不错。

 

### 理由4：UI界面

![img](file:///C:/Users/CAIJIN~1/AppData/Local/Temp/msohtmlclip1/01/clip_image002.png)

MinIO自带管理界面控制台，界面简洁好用。

### 理由5：性能

MinIO号称是世界上速度最快的对象存储服务器。在标准硬件上，对象存储的读/写速度最高可以达到183 GB/s和171 GB/s。关于FastDFS单线程测试写了20万个文件，总共200G，大约用时10个小时。总体上是很难达到MinIO“号称的”以G为单位的每秒读写速度。

 

### 理由6：容器化支持

MinIO提供了与k8s、etcd、docker等容器化技术深度集成方案，可以说就是为了云环境而生的。这点是FastDFS不具备的。

 

### 理由7：SDK支持

FastDFS目前提供了C和Java SDK ，以及PHP扩展SDK。

MinIO几乎提供了所有主流开发语言的SDK以及文档。

 

### 理由8：AWS S3标准兼容

Amazon的S3 API是对象存储领域的事实标准。MinIO是S3兼容性的事实上的标准，是第一个采用API和第一个添加对S3 Select支持的标准之一。包括微软Azure在内的750多家公司使用MinIO的S3网关，这一数字超过了业内其他公司的总和。

什么意思？就是说你现在为了节约成本使用MinIO，等你的公司壮大了、有钱了。不想自己运维基础设施了，你就可以把对象存储放到云上，只要云厂商支持S3标准，你的应用程序是不需要重新开发的。